<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>New,This,Prototypes and Classes</title>
    <link rel="stylesheet" href="../base.css">
</head>

<body>
    <button class="one">Button 1</button><br>
    <button class="two">Button 2</button>
    <script>
        // every thing in js is object.
        // new keyword
        const myDate = new Date('September 27,2000');   // myDate is an instance of Date
        console.log(myDate);

        // [] is the array literal syntax which is same as new Array('jon','dany');
        // {} is the object literal syntax which is same as new Object({name:"Jon"});

        function Pizza(toppings = [], customer) {
            console.log("Lets make a pizza");
            // this is used to store information for each of the instance.
            this.toppings = toppings;
            this.customer = customer;
            this.id = Math.floor(Math.random() * 16777215).toString(16);
            this.slices = 10;
        }


        Pizza.prototype.eat = function () {
            if (this.slices > 0) {
                this.slices = this.slices - 1;
                console.log(`You have ${this.slices} left in your pizza`);
            }
            else {
                console.log("No slices left");
            }
        }

        Pizza.prototype.describe = function () {
            return `This pizza is for ${this.customer} with the toppings ${this.toppings.join(',')} and there are ${this.slices} left!`;
        }
        const margeta = Pizza();
        console.log(margeta);

        // By using the new keyword it will create an new object that will be the instance of the function here it is Pizza.
        const pepperoniPizza = new Pizza(['pepperoni'], 'Jon');
        const canadianPizza = new Pizza(['pepperoni', 'mushrooms', 'onion'], 'Dany');
        console.log(pepperoniPizza);
        console.log(pepperoniPizza.constructor);
        console.log(pepperoniPizza instanceof Pizza);

        // this keyword.
        const button1 = document.querySelector('.one');
        const button2 = document.querySelector('.two');

        function tellMeAboutTheButton() {
            console.log("Outside", this);
            setTimeout(() => {
                console.log('inside', this); // value of this will be change if the function is not arrow function.
                this.textContent = "You clicked Me";
            }, 1000);
            // this keyword is always scoped to a function.
            // this keyword will not change in arrow function but it will change in any other function.
        }

        button1.addEventListener('click', tellMeAboutTheButton);
        button2.addEventListener('click', tellMeAboutTheButton);

        // this refer to the instance 
    </script>
</body>

</html>